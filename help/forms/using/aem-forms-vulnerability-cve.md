---
title: Mitigación de vulnerabilidades de Log4j2 para Experience Manager Forms
description: Mitigación de vulnerabilidades de Log4j2 para Experience Manager Forms
content-type: reference
products: SG_EXPERIENCEMANAGER/6.5/FORMS
topic-tags: Security
geptopics: SG_AEMFORMS/categories/jee
role: Admin
solution: Experience Manager, Experience Manager Forms
feature: Adaptive Forms
source-git-commit: c9d9a4d83a00587ee7b223e328abdef1bdd7438b
workflow-type: tm+mt
source-wordcount: '720'
ht-degree: 2%

---

# Mitigación de vulnerabilidades de Log4j2 para Experience Manager Forms

## Problema

Se han notificado vulnerabilidades de seguridad críticas para Apache Log4j2, una popular biblioteca de registro para aplicaciones basadas en Java. Se han analizado las siguientes vulnerabilidades:

<table border="1">
  <tr>
    <th>Vulnerabilidad</th>
    <th>Qué se ve afectado</th>
    <th>¿Qué no se ve afectado?</th>
    <th>Estado</th>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-44228">CVE-2021-44228</a></td>
    <td rowspan="2">
      <ul>
        <li>Experience Manager 6.5 Forms en JEE (todas las versiones desde 6.5 GA a 6.5.11)</li>
        <li>Experience Manager 6.4 Forms en JEE (todas las versiones desde 6.4 GA a 6.4.8)</li>
        <li>Experience Manager 6.3 Forms en JEE (todas las versiones desde 6.3 GA a 6.3.3)</li>
        <li>Experience Manager 6.5 Forms Designer</li>
        <li>Experience Manager 6.4 Forms Designer</li>
        <li>Servicio de conversión automatizada de formularios</li>
      </ul>
    </td>
    <td rowspan="2">
      <ul>
        <li>Experience Manager Forms Workbench (todas las versiones)</li>
        <li>Experience Manager Forms en OSGi (todas las versiones)</li>
      </ul>
    </td>
    <td rowspan="2">
      Se han corregido. Consulte la sección <strong>Resolución</strong> para ver las correcciones y pasos de mitigación.
    </td>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-45046">CVE-2021-45046</a></td>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-45105">CVE-2021-45105</a></td>
    <td rowspan="9" colspan="2">
      No afecta a ninguna versión de Experience Manager Forms en cuanto a las configuraciones de registro predeterminadas. Si tiene alguna configuración de registro adicional, compruebe estas configuraciones para ver si hay estas vulnerabilidades.
    </td>
  </tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-44832">CVE-2021-44832</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-4104">CVE-2021-4104</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-22963">CVE-2022-22963</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-22965">CVE-2022-22965</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-9488">CVE-2020-9488</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-23302">CVE-2022-23307</a></td><td></td></tr>
</table>

>[!NOTE]
> 
> AEM 6.5.13.0 Forms y las versiones anteriores incluyen bibliotecas Log4j (1.x y 2.17.1). Las bibliotecas AEM Forms Log4j 1.x de AEM 6.5.13.0 Forms y versiones anteriores no forman parte de la vulnerabilidad registrada, ni se consideran vulnerables en los análisis de código de AEM Forms realizados por Adobe. Sin embargo, todas las bibliotecas de Log4j 1.x se eliminan de la versión 6.5.14. Para obtener instrucciones para instalar AEM 6.5.14.0 o una versión posterior, consulte [notas de la versión](https://experienceleague.adobe.com/es/docs/experience-manager-65/content/release-notes/release-notes).

## Resolución

Puede utilizar uno de los siguientes métodos para mitigar el riesgo de esta vulnerabilidad:

* Instalación del Service Pack más reciente
* Uso de pasos de mitigación manuales

**Instalar el Service Pack más reciente**

>[!CAUTION]
> 
> Si ha aplicado una revisión en el entorno de Experience Manager Forms Service Pack 6.3.3.8 o Experience Manager Forms Service Pack 6.4.8.4, no instale el Service Pack con las correcciones de vulnerabilidades (enumeradas a continuación). La instalación de estos Service Packs puede sobrescribir la revisión. Adobe recomienda usar **pasos de mitigación manuales** en tal caso.

<table border="1" cellpadding="8" cellspacing="0">
  <thead>
    <tr>
      <th>Versión</th>
      <th>Versión</th>
      <th>Vínculo de descarga/Acción del usuario</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Experience Manager 6.5 Forms en JEE</td>
      <td>AEMForms-6.5.0-0038 (log4jv2.16)</td>
      <td rowspan="5">Descargar desde <a href="https://auth.services.adobe.com/en_US/index.html?callback=https%3A%2F%2Fims-na1.adobelogin.com%2Fims%2Fadobeid%2Fexc_app%2FAdobeID%2Ftoken%3Fredirect_uri%3Dhttps%253A%252F%252Fexperience.adobe.com%252F%2523old_hash%253Dold_hash%253D%252523%25252Fdownloads%2526from_ims%253Dtrue%253Fclient_id%253Dexc_app%2526api%253Dauthorize%2526scope%253Dab.manage%252Caccount_cluster.read%252Cadditional_info%252Cadditional_info.job_function%252Cadditional_info.projectedProductContext%252Cadditional_info.roles%252CAdobeID%252Cadobeio.appregistry.read%252Cadobeio_api%252Caudiencemanager_api%252Ccreative_cloud%252Cmps%252Copenid%252Corg.read%252Cpps.read%252Cread_organizations%252Cread_pc%252Cread_pc.acp%252Cread_pc.dma_tartan%252Csession%26state%3D%257B%2522jslibver%2522%253A%2522v2-v0.31.0-2-g1e8a8a8%2522%252C%2522nonce%2522%253A%25223811059492261787%2522%257D%26code_challenge_method%3Dplain%26use_ms_for_expiry%3Dtrue&client_id=exc_app&scope=ab.manage%2Caccount_cluster.read%2Cadditional_info%2Cadditional_info.job_function%2Cadditional_info.projectedProductContext%2Cadditional_info.roles%2CAdobeID%2Cadobeio.appregistry.read%2Cadobeio_api%2Caudiencemanager_api%2Ccreative_cloud%2Cmps%2Copenid%2Corg.read%2Cpps.read%2Cread_organizations%2Cread_pc%2Cread_pc.acp%2Cread_pc.dma_tartan%2Csession&state=%7B%22jslibver%22%3A%22v2-v0.31.0-2-g1e8a8a8%22%2C%22nonce%22%3A%223811059492261787%22%7D&relay=2cf36844-ac87-4b40-a6fe-9a06cd0a01b8&locale=en_US&flow_type=token&dctx_id=v%3A2%2Cs%2Cf%2Cb8e64530-b013-11ee-a6c1-e721bdec0171&idp_flow_type=login&response_type=token&profile_filter=%7B%22findFirst%22%3Atrue%2C+%22fallbackToAA%22%3Atrue%2C+%22preferForwardProfile%22%3Atrue%2C+%22searchEntireCluster%22%3Afalse%7D%3B+hasPC%28%22dma_tartan%22%29&code_challenge_method=plain&redirect_uri=https%3A%2F%2Fexperience.adobe.com%2F%23old_hash%3Dold_hash%3D%2523%252Fdownloads%26from_ims%3Dtrue%3Fclient_id%3Dexc_app%26api%3Dauthorize%26scope%3Dab.manage%2Caccount_cluster.read%2Cadditional_info%2Cadditional_info.job_function%2Cadditional_info.projectedProductContext%2Cadditional_info.roles%2CAdobeID%2Cadobeio.appregistry.read%2Cadobeio_api%2Caudiencemanager_api%2Ccreative_cloud%2Cmps%2Copenid%2Corg.read%2Cpps.read%2Cread_organizations%2Cread_pc%2Cread_pc.acp%2Cread_pc.dma_tartan%2Csession&use_ms_for_expiry=true#/">Distribución de software</a>.</td>
    </tr>
    <tr>
      <td>Experience Manager 6.4 Forms en JEE</td>
      <td>AEMForms-6.4.0-0027</td>
    </tr>
    <tr>
      <td>Experience Manager 6.3 Forms en JEE</td>
      <td>AEMForms-6.3.0-0047</td>
    </tr>
    <tr>
      <td>Experience Manager 6.5 Forms Designer</td>
      <td>AEM Forms Designer v650.019</td>
    </tr>
    <tr>
      <td>Experience Manager 6.4 Forms Designer</td>
      <td>AEM Forms Designer v640.012</td>
    </tr>
    <tr>
      <td>Servicio de conversión automatizada de formularios</td>
      <td>Se identificaron los pasos de mitigación y se aplicaron parches al servicio.</td>
      <td>No hay ninguna acción del usuario.</td>
    </tr>
  </tbody>
</table>

## Uso de pasos de mitigación manuales

Para mitigar el problema, para Experience Manager 6.5 Forms (versión log4j-core 2.10 y posterior), Experience Manager 6.4 Forms (versión log4j-core anterior a 2.10) y Experience Manager 6.3 Forms (versión log4j-core anterior a 2.10), realice los siguientes pasos:

1. Cierre todas las instancias y ubicaciones del servidor.

1. Quitar `org/apache/logging/log4j/core/lookup/JndiLookup.class` de los `log4j-core-2.xx.jar` vulnerables disponibles en las siguientes ubicaciones:

   * **EAR implementable:**

   ```javascript
   <FORMS_INSTALLATION_DIRECTORY>/configurationManager/export/adobe-livecycle-[jboss|weblogic|websphere].ear
   ```

   * **Localizador de GemFire o Geode:**

   ```javascript
   <FORMS_INSTALLATION_DIRECTORY>/lib/caching/lib
   ```

   Para actualizar el EAR implementable, según el sistema operativo, puede utilizar uno de los siguientes métodos para quitar `JndiLookup.class` de los `log4j-core-2.xx.jar` vulnerables:

   * (Linux con Oracle WebLogic o Redhat JBoss): ejecute el siguiente comando. Actualice `version` y la información del servidor de aplicaciones antes de ejecutar estos comandos:

   ```javascript
   unzip adobe-livecycle-<weblogic|jboss>.ear lib/log4j-core-<version>.jar
   ```

   ```javascript
   zip -d lib/log4j-core-xxx.jar org/apache/logging/log4j/core/lookup/JndiLookup.  class
   ```

   ```javascript
   zip -ru adobe-livecycle-jboss.ear lib/log4j-core-<version>.jar
   ```

   * (Linux con IBM WebSphere): ejecute el siguiente comando. Actualice `version` y la información del servidor de aplicaciones antes de ejecutar estos comandos:

   ```javascript
   unzip adobe-livecycle-websphere.ear log4j-core-<version>.jar
   ```

   ```javascript
   zip -d log4j-core-xxx.jar org/apache/logging/log4j/core/lookup/JndiLookup.class
   ```

   * (Microsoft Windows): Use una herramienta GUI como [7-Zip](https://www.7-zip.org/) para quitar el archivo de clase.
1. Repita el paso 2 para cada instancia (nodo) del servidor de aplicaciones y todos los localizadores (si hay más de uno).

1. Después de actualizar el JAR, vuelva a implementar el EAR modificado y reinicie todos los procesos del localizador y las instancias del servidor.

>[!NOTE]
> 
> * Reemplace la copia original del JAR log4j-core-2.xx por la actualizada. No se requieren otros cambios.
> * Cuando se vuelva a ejecutar el administrador de configuración, el contenido de `<FORMS_INSTALLATION_DIRECTORY/configurationManager/export` se puede sobrescribir.   Para evitar rehacer el cambio anterior cada vez que esto sucede, actualice el JAR en `<FORMS_INSTALLATION_DIRECTORY>/deploy/adobe-core-[jboss|weblogic|websphere].ear`. Esto garantiza que el `adobe-livecycle-[jboss|weblogic|websphere].ear` producido por el administrador de configuración ya tenga el `log4j-core-2.xx jar` actualizado.
> * Las modificaciones manuales de los artefactos implementables se pueden sobrescribir en los parches/actualización. Si esto sucede, vuelva a aplicar el procedimiento.

## Referencias

[https://logging.apache.org/log4j/2.x/security.html](https://logging.apache.org/security.html)

**¿Con quién debo ponerme en contacto si tengo más preguntas o problemas al seguir los pasos de mitigación?**

Puedes ponerte en contacto con el [Soporte técnico de Adobe](https://experienceleague.adobe.com/es?lang=es&support-solution=Experience+Manager#support) o enviar un [ticket de asistencia](https://experienceleague.adobe.com/es/docs/customer-one/using/home#submit-ticket).

**¿Con quién debo ponerme en contacto si tengo más preguntas o problemas al seguir los pasos de mitigación?**
[Avisos legales](https://helpx.adobe.com/es/legal/legal-notices.html)    |    [Política de privacidad en línea](https://www.adobe.com/es/privacy.html)